{% import 'macro.html.twig' as mymacro %}

<div class="my-custom-scrollbar">
<table class="table table-sm table-hover text-nowrap">
    <thead>
        <tr>
            <th class="text-center">Date</th>
            <th>Mode</th>
            <th>Bénéficiaire</th>
            <th>Catégories</th>
            <th>Etat</th>
            <th class="text-right">Débit</th>
            <th class="text-right">Crédit</th>
            <th class="text-right">Solde</th>
            <th>Mémo</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
    {% for item in transactions %}
        <tr>
            <td class="text-center">{{ item.date|date('d/m/Y') }}</td>
            <td><img src="{{ asset(item.payment.pathImage) }}" width="24"></td>
            <td>
            {% if item.transfer %}
                {% if item.amount > 0 %}<i class="fas fa-angle-double-left"></i>{% else %}<i class="fas fa-angle-double-right"></i>{% endif %}
                {{ item.transfer.account.name }}
             {% else %}
                {{ item.recipient.name }}
            {% endif %}
            </td>
            <td>{{ item.category.fullName }}</td>
            <td class="text-center">
                {% if item.state == constant('STATE_RECONCILIED', item) %}<span class="text-primary"><i class="far fa-check-circle"></i></span>{% endif %}
            </td>
            <td class="text-right text-red">{% if item.amount < 0 %}{{ mymacro.money(item.amount, account.currency, false) }}{% endif %}</td>
            <td class="text-right text-green">{% if item.amount > 0 %}{{ mymacro.money(item.amount, account.currency, false) }}{% endif %}</td>
            <td class="text-right">{{ mymacro.money(item.balance, account.currency, false) }}</td>
            <td>{{ item.memo }}</td>
            <td class="text-right align-middle">
                {% if item.state != constant('STATE_RECONCILIED', item) %}
                    <a data-url-load="{{ path('transaction__edit', {'id': item.id}) }}" class="btn btn-sm btn-info" data-toggle="olix-modal" data-id="{{ item.id }}" data-target="#modalForm"><i class="fas fa-edit"></i><span class="d-none d-md-inline">&nbsp;Modifier<span></a>
                    <a data-url-valid="{{ path('transaction__remove', {'id': item.id}) }}" class="btn btn-sm btn-danger" data-toggle="olix-modal" data-id="{{ item.id }}" data-target="#modalDelete"><i class="fas fa-trash"></i><span class="d-none d-md-inline">&nbsp;Supprimer<span></a>
                {% endif %}
            </td>
        </tr>
    {% else %}
        <tr>
            <td colspan="3">Aucune opérations trouvées</td>
        </tr>
    {% endfor %}
    </tbody>
</table>
</div>